(this["webpackJsonpagile-poker"]=this["webpackJsonpagile-poker"]||[]).push([[0],{111:function(e,t,a){e.exports=a(134)},116:function(e,t,a){},117:function(e,t,a){},127:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=(a(116),a(117),a(118),a(11)),i=a(5),s=a.n(i),u=a(176),m=a(95),f=a(167),p=a(171),d=a(87),v=a.n(d),E=(r.a.createContext(null),a(54)),h=a.n(E),g=(a(121),a(123),{apiKey:"AIzaSyB7eDqSi97maZL5LjOSBrnbRUrqDVOKuVw",authDomain:"agile-poker-sk.firebaseapp.com",databaseURL:"https://agile-poker-sk.firebaseio.com",projectId:"agile-poker-sk",storageBucket:"agile-poker-sk.appspot.com",messagingSenderId:"243041283381",appId:"1:243041283381:web:59f749904068703030307c",measurementId:"G-PLT1CHSW9K"});h.a.initializeApp(g);h.a.auth;var b=h.a.firestore(),y=h.a.firestore.FieldValue.serverTimestamp(),k=b,O=a(79),w=a(80),N=a(56),C=a(97),j=a(94),S=a(189),x=(a(127),a(81)),U=a.n(x),T=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={value:{storyPoint:n.props.value,style:n.props.style}},n.getDisplayableValue=function(){return"Infinity"!==n.state.value.storyPoint?n.state.value.storyPoint:r.a.createElement(S.a.Img,{className:"pokerCard__infinity",variant:"center",src:U.a,alt:"Infinity"})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.onClick=n.onClick.bind(Object(N.a)(n)),n}return Object(w.a)(a,[{key:"render",value:function(){var e=this,t=this.getDisplayableValue(),a=this.state.value;return r.a.createElement("div",null,r.a.createElement(S.a,{style:a.style,className:"m-2 pokerCard",id:a.storyPoint,onClick:function(){return e.onClick(a.storyPoint)}},r.a.createElement(S.a.Body,null,r.a.createElement("h4",null,t)),this.props.footer&&r.a.createElement("p",{className:"pokerCard__footer"},this.props.footer)))}}]),a}(n.Component),M=(a(76),a(82)),P=function(e){var t=e.currentUser,a=r.a.useState(new Map),n=Object(l.a)(a,2),o=n[0],c=n[1];r.a.useEffect((function(){var e=k.collection("result").doc(t.team),a=new Map,n=e.onSnapshot((function(e){var n;console.log("Received query snapshot of ".concat(e.data())),(null===(n=e.data())||void 0===n?void 0:n.members)||(window.location.href="".concat("/agile-poker","/").concat(t.team)),e.data().members.forEach((function(e){e.member&&e.storyPoint&&a.set(e.member,e.storyPoint)})),function(e,t){var a;if(e.size!==t.size)return!1;var n,r=Object(M.a)(e);try{for(r.s();!(n=r.n()).done;){var o=Object(l.a)(n.value,2),c=o[0],i=o[1];if((a=t.get(c))!==i||void 0===a&&!t.has(c))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}(a,o)||c(a)}),(function(e){console.log("Encountered error: ".concat(e))}));return function(){n()}}),[o,t.team]);return r.a.createElement("div",null,o&&o.size>0&&r.a.createElement(f.a,{className:"cards noHover",style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return o.forEach((function(t,a){console.log(t,a),e.push(r.a.createElement(T,{key:a,value:t,style:{width:"10rem",height:"15em",background:"#0047ab",color:"white",fontWeight:"bold"},footer:a.toUpperCase()}))})),e}()))},I=a(16),B=a.n(I),R=a(96),W=a(27),D=function(){return sessionStorage.getItem("agilePokerUserName")||""},_=function(){var e=Object(W.a)(B.a.mark((function e(t){var a,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=D()),a=k.collection("users").doc(t),e.next=4,a.get();case 4:return n=e.sent,console.log("Currently Logged in User Result: ",n.data()),e.abrupt("return",Object(R.a)({},n.data()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(W.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Cleared Tasks for: ",t),e.next=3,k.collection("result").doc(t).set({});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(W.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("result").doc(t).get();case 2:if(!(a=e.sent).exists){e.next=6;break}return console.log(a.data()),e.abrupt("return",a.data());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(W.a)(B.a.mark((function e(t,a){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("result").doc(t).set({taskId:a,members:[]});case 2:n=e.sent,console.log("Stored Result: ",a," ",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function V(){return(V=Object(W.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.collection("users").doc(t),e.next=3,a.set({isOnline:!1},{merge:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(W.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.collection("users").doc(t),e.next=3,a.set({isOnline:!0},{merge:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=a(190);function K(e){var t=e.currentUser,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(void 0),u=Object(l.a)(s,2),d=u[0],E=u[1],h=Object(n.useState)(!1),g=Object(l.a)(h,2),b=g[0],y=g[1];Object(n.useEffect)((function(){var e=k.collection("points").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().numeric}));i(t[0])}));return function(){e()}}),[]);var O=function(e){E(e),q(t.team).then((function(a){console.log(a),a&&a.taskId&&(k.collection("result").doc(t.team).set({members:[].concat(Object(m.a)(a.members),[{member:t.userName,storyPoint:e}])},{merge:!0}).then((function(){console.log("Stored Result of pokering")})),y(!0),i([e]))}))};return r.a.createElement("div",null,!b&&"PRODUCT OWNER"===(null===t||void 0===t?void 0:t.role.toUpperCase())&&r.a.createElement(F.a,{title:"Show Result"},r.a.createElement(p.a,{color:"secondary",className:"float-right",style:{borderColor:"black"},onClick:function(){return y(!0)}},r.a.createElement(v.a,null))),b?r.a.createElement(P,{currentUser:t}):r.a.createElement(f.a,{className:"cards",style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return c.sort((function(e,t){return e-t})).forEach((function(t){var a;e.push(r.a.createElement(T,{key:t,value:t,style:(a=t,{width:"10rem",height:"15em",disabled:d!==a}),onClick:O}))})),e}()))}function G(e){var t=e.currentUser;return r.a.createElement("div",null,r.a.createElement(K,{currentUser:t}))}var H=a(175),J=a(191),Y=(a(78),a(188)),Z=function(e){var t=e.team,a=e.role,n=e.setShowReset,o=r.a.useState(),c=Object(l.a)(o,2),i=c[0],s=c[1],u=r.a.useState("TEAM MEMBER"===a),m=Object(l.a)(u,2),f=m[0],p=m[1];r.a.useEffect((function(){var e=k.collection("result").doc(t).onSnapshot((function(e){e.data()&&e.data().taskId&&(s(e.data().taskId.toUpperCase()),p(!0),n(!0))}));return function(){e()}}),[i,t,n]);return r.a.createElement("div",null,f?r.a.createElement("h2",{className:"my-2 text-center",style:{color:"turquoise"}},i):r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){s(e.target.value)},fullWidth:!0,id:"taskId",label:"Task Id",name:"taskId",autoFocus:!0,onKeyPress:function(e){if(13===e.charCode){e.preventDefault();var a=e.target.value;L(t,a),p(!0),s(a.toUpperCase()),n(!0)}},placeholder:i}))},$=function(e){var t=e.currentUser,a=e.style,n=r.a.useState(!1),o=Object(l.a)(n,2),c=o[0],i=o[1];return r.a.createElement(S.a,{className:"rightCard",style:a},r.a.createElement(S.a.Body,null,r.a.createElement(S.a.Title,{className:"title"},"Poker"),r.a.createElement(S.a.Text,{className:"text"},t.userName),r.a.createElement("p",{className:"text"},t.role?t.role.toUpperCase():"TEAM MEMBER"),r.a.createElement(Z,{team:t.team,role:t.role.toUpperCase(),setShowReset:i}),c&&"TEAM MEMBER"!==t.role.toUpperCase()&&r.a.createElement("div",null," ",r.a.createElement(J.a,{block:!0,onClick:function(){A(t.team,"").then((function(){window.location.href="".concat("/agile-poker","/"),console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))},variant:"light"},"Reset"))))},Q=a(89),X=a.n(Q),ee=a(88),te=a.n(ee),ae=(a(131),function(e){var t=e.usr;return r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{className:"teamMember__details"},r.a.createElement("p",{className:"text-capitalize"},t.userName),r.a.createElement("span",null,t.isOnline?re():ne())))}),ne=function(){return r.a.createElement(F.a,{title:"offline",placement:"right-start"},r.a.createElement(te.a,{className:"teamMember__offline"}))},re=function(){return r.a.createElement(F.a,{title:"connected",placement:"right-start"},r.a.createElement(X.a,{className:"teamMember__online"}))};function oe(e){var t=e.team,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){var e=[],a=k.collection("users").onSnapshot((function(a){a.docs.map((function(e){return e.data()})).filter((function(e){return e.team.toUpperCase()===t})).forEach((function(t){e.push(t)})),(!c&&e||!function(e,t){if(e.length!==t.length)return!1;var a=!0;return e.forEach((function(e){t.forEach((function(t){var n=!0;e.userName===t.userName&&((n=n&&t.isOnline===e.isOnline)||console.log("isOnline"," ",t.isOnline," ",e.isOnline)),a=a&&n}))})),a}(c,e))&&(console.log(c,"=>",e),i(e))}));return function(){a()}}),[c,t]),r.a.createElement("div",null,c.filter((function(e){return e.isActive&&e.team.toUpperCase()===t})).slice(0,7).map((function(e){return r.a.createElement(ae,{key:e.userName,usr:e})})))}a(132);var ce=function(e){var t=e.className,a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){c||_().then((function(e){return i(e.team.toUpperCase())}))}),[c]),r.a.createElement("div",null,c&&r.a.createElement("div",{className:"team"},r.a.createElement("div",{className:"mb-2 team__title"},r.a.createElement("h5",{className:t},"".concat(c.toUpperCase()))),r.a.createElement(oe,{team:c})))},le=function(e){var t=e.style;return r.a.createElement(S.a,{className:"rightCard teamCard",style:t},r.a.createElement(S.a.Body,null,r.a.createElement(ce,{className:"title"})))},ie={border:"none"};function se(e){var t=e.currentUser;return r.a.createElement("div",null,t&&r.a.createElement(H.a,{className:"justify-content-center"},r.a.createElement($,{currentUser:t,style:ie}),r.a.createElement(le,{style:ie})))}G.propTypes={currentUser:s.a.object.isRequired};var ue=function(e){var t=e.userName,a=r.a.useState(),n=Object(l.a)(a,2),o=n[0],c=n[1];return r.a.useEffect((function(){o||_(t).then((function(e){c(e),e.isOnline||function(e){z.apply(this,arguments)}(t)}))}),[o,t]),r.a.createElement("div",{className:"container-md content-justify-center-sm",style:{flexGrow:3}},o&&r.a.createElement(u.a,null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(G,{currentUser:o})),r.a.createElement("div",{className:"col-md"},r.a.createElement(se,{currentUser:o}))))},me=a(193),fe=a(180),pe=a(179),de=a(90),ve=a.n(de),Ee=a(178),he=a(137),ge=a(177),be=Object(ge.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1),minWidth:120},submit:{margin:e.spacing(3,0,2)}}})),ye=a(174),ke=a(185),Oe=a(194);function we(e){var t=e.team,a=r.a.useState(void 0),n=Object(l.a)(a,2),o=n[0],c=n[1],i=r.a.useState("Team Member"),s=Object(l.a)(i,2),u=s[0],m=s[1],f=r.a.useState(),p=Object(l.a)(f,2),d=p[0],v=p[1];function E(){return(E=Object(W.a)(B.a.mark((function e(){var t,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.collection("users").doc(o.toUpperCase()),e.next=3,t.get();case 3:(a=e.sent).exists?h(a.data()):h();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){var e=Object(W.a)(B.a.mark((function e(a){var n,r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==t&&void 0!==t?t:d,r=a?Ne(a,n):Ce(o.toUpperCase(),u,n),e.next=4,k.collection("users").doc(o.toUpperCase()).set(r);case 4:c=e.sent,console.log("Set logged in user: ",c),window.location.href="".concat("/agile-poker","/").concat(n),console.log(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=be();return r.a.createElement(Ee.a,{component:"main",maxWidth:"xs"},r.a.createElement(pe.a,null),r.a.createElement("div",{className:g.paper},r.a.createElement(me.a,{className:g.avatar},r.a.createElement(ve.a,null)),r.a.createElement(he.a,{component:"h1",variant:"h5"},"Agile Poker Table"),r.a.createElement("form",{className:g.form,onSubmit:function(e){e.preventDefault(),o&&(function(){E.apply(this,arguments)}(),function(e){sessionStorage.setItem("agilePokerUserName",e.toUpperCase())}(o))},noValidate:!0},!t&&r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){var t;v(null===(t=e.target.value)||void 0===t?void 0:t.toLowerCase())},fullWidth:!0,id:"team",label:"Team",name:"team",autoFocus:!0}),r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){c(e.target.value)},fullWidth:!0,id:"email",label:"User Name",name:"userName",autoComplete:"email",autoFocus:!0}),!t&&r.a.createElement(ye.a,{className:g.formControl,fullWidth:!0},r.a.createElement(ke.a,{value:u,onChange:function(e){m(e.target.value)},defaultValue:"Team Member",className:g.selectEmpty,inputProps:{"aria-label":"Without label"},variant:"outlined"},r.a.createElement(Oe.a,{value:"Team Member"},"Team Member"),r.a.createElement(Oe.a,{value:"Product Owner"},"Product Owner"),r.a.createElement(Oe.a,{value:"Scrum Master"},"Scrum Master"))),r.a.createElement(fe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:g.submit},"Enter"))))}var Ne=function(e,t){return{userName:e.userName,isOnline:!0,isActive:!0,memberSince:e.memberSince,team:t,role:e.role}},Ce=function(e,t,a){return{userName:e,isOnline:!0,isActive:!0,memberSince:y,team:a,role:t}};function je(e){var t,a,n,o;console.log(null===e||void 0===e||null===(t=e.match)||void 0===t||null===(a=t.params)||void 0===a?void 0:a.team);var c=null===e||void 0===e||null===(n=e.match)||void 0===n||null===(o=n.params)||void 0===o?void 0:o.team,l=D();return r.a.createElement("div",null,l?r.a.createElement(ue,{userName:l}):r.a.createElement(we,{team:c}))}var Se=a(186),xe=a(181);function Ue(){return r.a.createElement(he.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(xe.a,{color:"inherit",href:"https://github.com/"},"Saurabh")," ",(new Date).getFullYear(),".")}var Te=a(182),Me=a(183),Pe=a(184),Ie=a(92),Be=a.n(Ie),Re=a(91),We=a.n(Re);function De(){var e=D();_e(e),sessionStorage.removeItem("agilePokerUserName")}var _e=function(e){(function(e){return V.apply(this,arguments)})(e).then((function(){console.log("logging out"),window.location.href="".concat("/agile-poker","/")})).catch((function(e){console.error(e)}))},Ae=Object(ge.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},fab:{height:"3em",width:"3em"}}})),qe=function(){var e=Ae(),t=r.a.useState(D()),a=Object(l.a)(t,2),n=a[0],o=a[1],c=!!n;return r.a.createElement("div",null,r.a.createElement(Te.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(Me.a,{className:e.toolbar},r.a.createElement(he.a,{variant:"h6",noWrap:!0,className:e.toolbarTitle},"Agile Poker"),r.a.createElement("nav",null),c&&r.a.createElement("div",null,r.a.createElement(Ve,{classes:e}),r.a.createElement(Le,{classes:e,clearSessionStore:function(){De(),o(void 0)}})))))},Le=function(e){var t=e.classes,a=e.clearSessionStore;return r.a.createElement(F.a,{title:"Logout",arrow:!0},r.a.createElement(p.a,{onClick:function(){return a()}},r.a.createElement(Pe.a,{color:"secondary",className:t.fab},r.a.createElement(We.a,null))))},Ve=function(e){var t=e.classes;return r.a.createElement(F.a,{title:"Profile",arrow:!0},r.a.createElement(Pe.a,{color:"primary",className:t.fab,onClick:function(){return alert("you found a hidden feature ;)")}},r.a.createElement(Be.a,null)))},ze=a(93),Fe=a(13),Ke=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(qe,null)),r.a.createElement(ze.a,null,r.a.createElement(Fe.c,null,r.a.createElement(Fe.a,{exact:!0,path:"/agile-poker/:team",component:je}),r.a.createElement(Fe.a,{path:"/",component:je}))),r.a.createElement("footer",null,r.a.createElement(Se.a,{mt:8},r.a.createElement(Ue,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t,a){},78:function(e,t,a){},81:function(e,t,a){e.exports=a.p+"static/media/infinity.cf7b1a96.svg"}},[[111,1,2]]]);
//# sourceMappingURL=main.174ea51b.chunk.js.map