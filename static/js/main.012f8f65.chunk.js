(this["webpackJsonpagile-poker"]=this["webpackJsonpagile-poker"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},111:function(e,t,a){},114:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(100),a(101),a(102),a(10)),i=a(5),s=a.n(i),u=a(153),m=a(80),f=a(148),p=(r.a.createContext(null),a(51)),d=a.n(p),v=(a(105),a(107),{apiKey:"AIzaSyB7eDqSi97maZL5LjOSBrnbRUrqDVOKuVw",authDomain:"agile-poker-sk.firebaseapp.com",databaseURL:"https://agile-poker-sk.firebaseio.com",projectId:"agile-poker-sk",storageBucket:"agile-poker-sk.appspot.com",messagingSenderId:"243041283381",appId:"1:243041283381:web:59f749904068703030307c",measurementId:"G-PLT1CHSW9K"});d.a.initializeApp(v);d.a.auth;var E=d.a.firestore(),h=a(66),g=a(67),b=a(43),y=a(82),k=a(79),N=a(166),w=(a(111),a(68)),O=a.n(w),j=function(e){Object(y.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={value:{storyPoint:n.props.value,style:n.props.style}},n.getDisplayableValue=function(){return"Infinity"!==n.state.value.storyPoint?n.state.value.storyPoint:r.a.createElement(N.a.Img,{className:"pokerCard__infinity",variant:"center",src:O.a,alt:"Infinity"})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.onClick=n.onClick.bind(Object(b.a)(n)),n}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.getDisplayableValue(),a=this.state.value;return r.a.createElement("div",null,r.a.createElement(N.a,{style:a.style,className:"m-2 pokerCard",id:a.storyPoint,onClick:function(){return e.onClick(a.storyPoint)}},r.a.createElement(N.a.Body,null,r.a.createElement("h4",null,t)),this.props.footer&&r.a.createElement("p",{className:"pokerCard__footer"},this.props.footer)))}}]),a}(n.Component),x=(a(63),a(69)),S=function(e){var t=e.currentUser,a=r.a.useState(new Map),n=Object(l.a)(a,2),o=n[0],c=n[1];r.a.useEffect((function(){var e=E.collection("result").doc(t.team),a=new Map,n=e.onSnapshot((function(e){console.log("Received query snapshot of ".concat(e.data())),e.data().members||(window.location.href="".concat("/agile-poker","/")),e.data().members.forEach((function(e){e.member&&e.storyPoint&&a.set(e.member,e.storyPoint)})),function(e,t){var a;if(e.size!==t.size)return!1;var n,r=Object(x.a)(e);try{for(r.s();!(n=r.n()).done;){var o=Object(l.a)(n.value,2),c=o[0],i=o[1];if((a=t.get(c))!==i||void 0===a&&!t.has(c))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}(a,o)||c(a)}),(function(e){console.log("Encountered error: ".concat(e))}));return function(){n()}}),[o,t.team]);return r.a.createElement("div",null,o&&o.size>0&&r.a.createElement(f.a,{className:"cards noHover",style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return o.forEach((function(t,a){console.log(t,a),e.push(r.a.createElement(j,{key:a,value:t,style:{width:"10rem",height:"15em",background:"#0047ab",color:"white",fontWeight:"bold"},footer:a.toUpperCase()}))})),e}()))},C=a(14),U=a.n(C),I=a(81),P=a(21),B=function(){return sessionStorage.getItem("agilePokerUserName")||""},M=function(){var e=Object(P.a)(U.a.mark((function e(t){var a,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=B()),a=E.collection("users").doc(t),e.next=4,a.get();case 4:return n=e.sent,console.log("Currently Logged in User Result: ",n.data()),e.abrupt("return",Object(I.a)({},n.data()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(P.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Cleared Tasks for: ",t),e.next=3,E.collection("result").doc(t).set({});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(P.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.collection("result").doc(t).get();case 2:if(!(a=e.sent).exists){e.next=6;break}return console.log(a.data()),e.abrupt("return",a.data());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(P.a)(U.a.mark((function e(t,a){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.collection("result").doc(t).set({taskId:a,members:[]});case 2:n=e.sent,console.log("Stored Result: ",a," ",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function _(){return(_=Object(P.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=E.collection("users").doc(t),e.next=3,a.set({isOnline:!1},{merge:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){var t=e.currentUser,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(void 0),u=Object(l.a)(s,2),p=u[0],d=u[1],v=Object(n.useState)(!1),h=Object(l.a)(v,2),g=h[0],b=h[1];Object(n.useEffect)((function(){var e=E.collection("points").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().numeric}));i(t[0])}));return function(){e()}}),[]);var y=function(e){d(e),R(t.team).then((function(a){console.log(a),a.taskId&&(E.collection("result").doc(t.team).set({members:[].concat(Object(m.a)(a.members),[{member:t.userName,storyPoint:e}])},{merge:!0}).then((function(){console.log("Stored Result of pokering")})),b(!0),i([e]))}))};return r.a.createElement("div",null,g?r.a.createElement(S,{currentUser:t}):r.a.createElement(f.a,{className:"cards",style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return c.sort((function(e,t){return e-t})).forEach((function(t){var a;e.push(r.a.createElement(j,{key:t,value:t,style:(a=t,{width:"10rem",height:"15em",disabled:p!==a}),onClick:y}))})),e}()))}function W(e){var t=e.currentUser;return r.a.createElement("div",null,r.a.createElement(A,{currentUser:t}))}var q=a(152),L=a(168),z=(a(64),a(163)),V=function(e){var t=e.team,a=e.role,n=e.setShowReset,o=r.a.useState(),c=Object(l.a)(o,2),i=c[0],s=c[1],u=r.a.useState("TEAM MEMBER"===a),m=Object(l.a)(u,2),f=m[0],p=m[1];r.a.useEffect((function(){var e=E.collection("result").doc(t).onSnapshot((function(e){e.data().taskId&&(s(e.data().taskId.toUpperCase()),p(!0),n(!0))}));return function(){e()}}),[i,t,n]);return r.a.createElement("div",null,f?r.a.createElement("h2",{className:"text-center",style:{color:"turquoise"}},i):r.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){s(e.target.value)},fullWidth:!0,id:"taskId",label:"Task Id",name:"taskId",autoFocus:!0,onKeyPress:function(e){if(13===e.charCode){e.preventDefault();var a=e.target.value;D(t,a),p(!0),s(a.toUpperCase()),n(!0)}},placeholder:i}))},K=function(e){var t=e.currentUser,a=e.style,n=r.a.useState(!1),o=Object(l.a)(n,2),c=o[0],i=o[1];return r.a.createElement(N.a,{className:"rightCard",style:a},r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,{className:"title"},"Poker"),r.a.createElement(N.a.Text,{className:"text"},t.userName.toUpperCase()),r.a.createElement("p",{className:"text"},t.role?t.role.toUpperCase():"TEAM MEMBER"),r.a.createElement(V,{team:t.team,role:t.role.toUpperCase(),setShowReset:i}),c&&"TEAM MEMBER"!==t.role.toUpperCase()&&r.a.createElement("div",null," ",r.a.createElement(L.a,{block:!0,onClick:function(){T(t.team,"").then((function(){window.location.href="".concat("/agile-poker","/"),console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))},variant:"Link"},"Reset"))))},F=a(75),G=a.n(F),H=a(74),J=a.n(H),Y=a(167),Z=(a(114),function(e){var t=e.usr;return r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{className:"teamMember__details"},r.a.createElement("p",{className:"text-capitalize"},t.userName),r.a.createElement("span",null,t.isOnline?Q():$())))}),$=function(){return r.a.createElement(Y.a,{title:"offline",placement:"right-start"},r.a.createElement(J.a,{className:"teamMember__offline"}))},Q=function(){return r.a.createElement(Y.a,{title:"connected",placement:"right-start"},r.a.createElement(G.a,{className:"teamMember__online"}))};function X(e){var t=e.team,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){var e=[],a=E.collection("users").onSnapshot((function(a){a.docs.map((function(e){return e.data()})).filter((function(e){return e.team.toUpperCase()===t})).forEach((function(t){e.push(t)})),(!c&&e||!function(e,t){if(e.length!==t.length)return!1;var a=!0;return e.forEach((function(e){t.forEach((function(t){var n=!0;e.userName===t.userName&&((n=n&&t.isOnline===e.isOnline)||console.log("isOnline"," ",t.isOnline," ",e.isOnline)),a=a&&n}))})),a}(c,e))&&(console.log(c,"=>",e),i(e))}));return function(){a()}}),[c,t]),r.a.createElement("div",null,c.filter((function(e){return e.isActive&&e.team.toUpperCase()===t})).slice(0,7).map((function(e){return r.a.createElement(Z,{key:e.userName,usr:e})})))}a(116);var ee=function(e){var t=e.className,a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){c||M().then((function(e){return i(e.team.toUpperCase())}))}),[c]),r.a.createElement("div",null,c&&r.a.createElement("div",{className:"team"},r.a.createElement("div",{className:"mb-2 team__title"},r.a.createElement("h5",{className:t},"".concat(c.toUpperCase()))),r.a.createElement(X,{team:c})))},te=function(e){var t=e.style;return r.a.createElement(N.a,{className:"rightCard teamCard",style:t},r.a.createElement(N.a.Body,null,r.a.createElement(ee,{className:"title"})))},ae={border:"none"};function ne(e){var t=e.currentUser;return r.a.createElement("div",null,t&&r.a.createElement(q.a,{className:"justify-content-center"},r.a.createElement(K,{currentUser:t,style:ae}),r.a.createElement(te,{style:ae})))}W.propTypes={userName:s.a.object.isRequired};var re=function(e){var t=e.userName,a=r.a.useState(),n=Object(l.a)(a,2),o=n[0],c=n[1];return r.a.useEffect((function(){o||M(t).then((function(e){return c(e)}))}),[o,t]),r.a.createElement("div",{className:"container-md content-justify-center-sm",style:{flexGrow:3}},r.a.createElement(u.a,null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(W,{currentUser:o})),r.a.createElement("div",{className:"col-md"},r.a.createElement(ne,{currentUser:o}))))},oe=a(169),ce=a(157),le=a(156),ie=a(76),se=a.n(ie),ue=a(155),me=a(120),fe=a(154),pe=Object(fe.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function de(){var e=r.a.useState(void 0),t=Object(l.a)(e,2),a=t[0],n=t[1];function o(){return(o=Object(P.a)(U.a.mark((function e(){var t,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.collection("users").doc(a),e.next=3,t.get();case 3:(n=e.sent).exists&&c(n.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(){var e=Object(P.a)(U.a.mark((function e(t){var n,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ve(t),e.next=3,E.collection("users").doc(a).set(n);case 3:r=e.sent,console.log("Set logged in user: ",r),window.location.href="".concat("/agile-poker","/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=pe();return r.a.createElement(ue.a,{component:"main",maxWidth:"xs"},r.a.createElement(le.a,null),r.a.createElement("div",{className:i.paper},r.a.createElement(oe.a,{className:i.avatar},r.a.createElement(se.a,null)),r.a.createElement(me.a,{component:"h1",variant:"h5"},"Agile Poker Table"),r.a.createElement("form",{className:i.form,onSubmit:function(e){e.preventDefault(),a&&(function(){o.apply(this,arguments)}(),function(e){sessionStorage.setItem("agilePokerUserName",e)}(a))},noValidate:!0},r.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){n(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"userName",autoComplete:"email",autoFocus:!0}),r.a.createElement(ce.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit},"Enter"))))}var ve=function(e){return{userName:e.userName,isOnline:!0,isActive:!0,memberSince:e.memberSince,team:e.team,role:e.role}};function Ee(){var e=B();return r.a.createElement("div",null,e?r.a.createElement(re,{userName:e}):r.a.createElement(de,null))}var he=a(164),ge=a(158);function be(){return r.a.createElement(me.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ge.a,{color:"inherit",href:"https://github.com/saurabhpro/"},"Saurabh")," ",(new Date).getFullYear(),".")}var ye=a(159),ke=a(160),Ne=a(161),we=a(162),Oe=a(78),je=a.n(Oe),xe=a(77),Se=a.n(xe);function Ce(){var e=B();Ue(e),sessionStorage.removeItem("agilePokerUserName")}var Ue=function(e){(function(e){return _.apply(this,arguments)})(e).then((function(){console.log("logging out"),window.location.href="".concat("/agile-poker","/")})).catch((function(e){console.error(e)}))},Ie=Object(fe.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},fab:{height:"3em",width:"3em"}}})),Pe=function(){var e=Ie(),t=r.a.useState(B()),a=Object(l.a)(t,2),n=a[0],o=a[1],c=!!n;return r.a.createElement("div",null,r.a.createElement(ye.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(ke.a,{className:e.toolbar},r.a.createElement(me.a,{variant:"h6",color:"light",noWrap:!0,className:e.toolbarTitle},"Agile Poker"),r.a.createElement("nav",null),c&&r.a.createElement("div",null,r.a.createElement(Me,{classes:e}),r.a.createElement(Be,{classes:e,clearSessionStore:function(){Ce(),o(void 0)}})))))},Be=function(e){var t=e.classes,a=e.clearSessionStore;return r.a.createElement(Y.a,{title:"Logout",arrow:!0},r.a.createElement(Ne.a,{onClick:function(){return a()}},r.a.createElement(we.a,{color:"secondary",className:t.fab},r.a.createElement(Se.a,null))))},Me=function(e){var t=e.classes;return r.a.createElement(Y.a,{title:"Profile",arrow:!0},r.a.createElement(we.a,{color:"primary",className:t.fab,onClick:function(){return alert("you found a hidden feature ;)")}},r.a.createElement(je.a,null)))},Te=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(Pe,null)),r.a.createElement(Ee,null),r.a.createElement("footer",null,r.a.createElement(he.a,{mt:8},r.a.createElement(be,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){},64:function(e,t,a){},68:function(e,t,a){e.exports=a.p+"static/media/infinity.cf7b1a96.svg"},95:function(e,t,a){e.exports=a(117)}},[[95,1,2]]]);
//# sourceMappingURL=main.012f8f65.chunk.js.map