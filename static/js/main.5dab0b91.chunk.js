(this["webpackJsonpagile-poker"]=this["webpackJsonpagile-poker"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},109:function(e,t,a){},114:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(100),a(101),a(102),a(12)),i=a(153),s=a(80),u=a(148),m=a(66),f=(r.a.createContext(null),a(51)),p=a.n(f),d=(a(103),a(105),{apiKey:"AIzaSyB7eDqSi97maZL5LjOSBrnbRUrqDVOKuVw",authDomain:"agile-poker-sk.firebaseapp.com",databaseURL:"https://agile-poker-sk.firebaseio.com",projectId:"agile-poker-sk",storageBucket:"agile-poker-sk.appspot.com",messagingSenderId:"243041283381",appId:"1:243041283381:web:59f749904068703030307c",measurementId:"G-PLT1CHSW9K"});p.a.initializeApp(d);p.a.auth;var v=p.a.firestore(),E=a(67),h=a(68),g=a(43),b=a(82),y=a(79),k=a(166),N=(a(109),a(69)),O=a.n(N),w=function(e){Object(b.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={value:{storyPoint:n.props.value,style:n.props.style}},n.getDisplayableValue=function(){return"Infinity"!==n.state.value.storyPoint?n.state.value.storyPoint:r.a.createElement(k.a.Img,{className:"pokerCard__infinity",variant:"center",src:O.a,alt:"Infinity"})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.onClick=n.onClick.bind(Object(g.a)(n)),n}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.getDisplayableValue(),a=this.state.value;return r.a.createElement("div",null,r.a.createElement(k.a,{style:a.style,className:"m-2 pokerCard",id:a.storyPoint,onClick:function(){return e.onClick(a.storyPoint)}},r.a.createElement(k.a.Body,null,r.a.createElement("h4",null,t)),this.props.footer&&r.a.createElement("p",{className:"pokerCard__footer"},this.props.footer)))}}]),a}(n.Component),C=(a(63),function(e,t){var a;if(e.size!==t.size)return!1;var n,r=Object(m.a)(e);try{for(r.s();!(n=r.n()).done;){var o=Object(l.a)(n.value,2),c=o[0],i=o[1];if((a=t.get(c))!==i||void 0===a&&!t.has(c))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}),j=function(e){var t=e.currentUser,a=r.a.useState(new Map),n=Object(l.a)(a,2),o=n[0],c=n[1];r.a.useEffect((function(){var e=v.collection("result").doc(t.team),a=new Map,n=e.onSnapshot((function(e){console.log("Received query snapshot of ".concat(e.data())),e.data().members||(window.location.href="".concat("/agile-poker","/")),e.data().members.forEach((function(e){e.member&&e.storyPoint&&a.set(e.member,e.storyPoint)})),C(a,o)||c(a)}),(function(e){console.log("Encountered error: ".concat(e))}));return function(){n()}}),[o,t.team]);return r.a.createElement("div",null,o&&o.size>0&&r.a.createElement(u.a,{className:"cards noHover",style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return console.log(o),o.forEach((function(t,a){console.log(t,a),e.push(r.a.createElement(w,{key:a,value:t,style:{width:"10rem",height:"15em",background:"black",color:"cyan",fontWeight:"bold"},footer:a.toUpperCase()}))})),e}()))},x=a(14),S=a.n(x),U=a(81),I=a(20),P=function(){return sessionStorage.getItem("agilePokerUserName")||""},B=function(){var e=Object(I.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=P()),a=v.collection("users").doc(t),e.next=4,a.get();case 4:return n=e.sent,console.log("Currently Logged in User Result: ",n.data()),e.abrupt("return",Object(U.a)({},n.data()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(I.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Cleared Tasks for: ",t),e.next=3,v.collection("result").doc(t).set({});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(I.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.collection("result").doc(t).get();case 2:if(!(a=e.sent).exists){e.next=6;break}return console.log(a.data()),e.abrupt("return",a.data());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(I.a)(S.a.mark((function e(t,a){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.collection("result").doc(t).set({taskId:a,members:[]});case 2:n=e.sent,console.log("Stored Result: ",a," ",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function R(e){var t=e.currentUser,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1],m=Object(n.useState)(void 0),f=Object(l.a)(m,2),p=f[0],d=f[1],E=Object(n.useState)(!1),h=Object(l.a)(E,2),g=h[0],b=h[1];Object(n.useEffect)((function(){var e=v.collection("points").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().numeric}));i(t[0])}));return function(){e()}}),[]);var y=function(e){d(e),T(t.team).then((function(a){if(console.log(a),a.taskId){var n=v.collection("result").doc(t.team).set({members:[].concat(Object(s.a)(a.members),[{member:t.userName,storyPoint:e}])},{merge:!0});n.exists&&console.log("Stored Result: ",n.data()),b(!0),i([e])}}))};return r.a.createElement("div",null,g?r.a.createElement(j,{currentUser:t}):r.a.createElement(u.a,{className:"cards",style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return c.sort((function(e,t){return e-t})).forEach((function(t){var a;e.push(r.a.createElement(w,{key:t,value:t,style:(a=t,{width:"10rem",height:"15em",disabled:p!==a}),onClick:y}))})),e}()))}function _(e){var t=e.currentUser;return r.a.createElement("div",null,r.a.createElement(R,{currentUser:t}))}var A=a(152),W=a(168),L=(a(64),a(163)),q=function(e){var t=e.team,a=e.role,n=r.a.useState(),o=Object(l.a)(n,2),c=o[0],i=o[1],s=r.a.useState("TEAM MEMBER"===a),u=Object(l.a)(s,2),m=u[0],f=u[1];r.a.useEffect((function(){var e=v.collection("result").doc(t).onSnapshot((function(e){var t;i(null===(t=e.data().taskId)||void 0===t?void 0:t.toUpperCase())}));return function(){e()}}),[c,t]);return r.a.createElement("div",null,m?r.a.createElement("h2",{className:"text-center",style:{color:"red"}},c):r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){i(e.target.value)},fullWidth:!0,id:"taskId",name:"taskId",autoFocus:!0,onKeyPress:function(e){if(13===e.charCode){e.preventDefault();var a=e.target.value;D(t,a),i(a.toUpperCase()),f(!0)}},placeholder:c}))},z=function(e){var t=e.currentUser,a=e.style;return r.a.createElement(k.a,{className:"rightCard",style:a},r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,{className:"title"},"Poker"),r.a.createElement(k.a.Text,{className:"text"},t.userName.toUpperCase()),r.a.createElement("p",{className:"text"},t.role?t.role.toUpperCase():"TEAM MEMBER"),r.a.createElement(q,{team:t.team,role:t.role.toUpperCase()}),("SCRUM MASTER"===t.role.toUpperCase()||"PRODUCT OWNER"===t.role.toUpperCase())&&r.a.createElement("div",null," ",r.a.createElement(W.a,{block:!0,onClick:function(){M(t.team,"").then((function(){window.location.href="".concat("/agile-poker","/"),console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))},variant:"Link"},"Reset"))))},V=a(75),K=a.n(V),F=a(74),G=a.n(F),H=a(167);a(114);function J(e){var t=e.team,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){var e=[],a=v.collection("users").onSnapshot((function(a){a.docs.map((function(e){return e.data()})).filter((function(e){return e.team.toUpperCase()===t})).forEach((function(t){e.push(t)})),(!c&&e||!Q(c,e))&&(console.log(c,"=>",e),i(e))}));return function(){a()}}),[c,t]),r.a.createElement("div",null,c.filter((function(e){return e.isActive&&e.team.toUpperCase()===t})).slice(0,7).map((function(e){return r.a.createElement(Y,{key:e.userName,usr:e})})))}var Y=function(e){var t=e.usr;return r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{className:"teamMember__details"},r.a.createElement("p",null,t.userName.toUpperCase()),r.a.createElement("span",null,t.isOnline?$():Z())))},Z=function(){return r.a.createElement(H.a,{title:"offline",placement:"right-start"},r.a.createElement(G.a,{className:"teamMember__offline"}))},$=function(){return r.a.createElement(H.a,{title:"connected",placement:"right-start"},r.a.createElement(K.a,{className:"teamMember__online"}))},Q=function(e,t){if(e.length!==t.length)return!1;var a=!0;return e.forEach((function(e){t.forEach((function(t){var n=!0;e.userName===t.userName&&((n=n&&t.isOnline===e.isOnline)||console.log("isOnline"," ",t.isOnline," ",e.isOnline)),a=a&&n}))})),a},X=(a(116),function(e){var t=e.className,a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){c||B().then((function(e){return i(e.team.toUpperCase())}))}),[c]),r.a.createElement("div",null,c&&r.a.createElement("div",{className:"team"},r.a.createElement("div",{className:"team__title"},r.a.createElement("h5",{className:t},"".concat(c.toUpperCase()))),r.a.createElement(J,{team:c})))}),ee=function(e){var t=e.style;return r.a.createElement(k.a,{className:"rightCard teamCard",style:t},r.a.createElement(k.a.Body,null,r.a.createElement(X,{className:"title"})))},te={border:"none"};function ae(e){var t=e.currentUser;return r.a.createElement("div",null,t&&r.a.createElement(A.a,{className:"justify-content-center"},r.a.createElement(z,{currentUser:t,style:te}),r.a.createElement(ee,{style:te})))}var ne=function(e){var t=e.userName,a=r.a.useState(),n=Object(l.a)(a,2),o=n[0],c=n[1];return r.a.useEffect((function(){o||B(t).then((function(e){return c(e)}))}),[o,t]),r.a.createElement("div",{className:"container-md content-justify-center-sm",style:{flexGrow:3}},r.a.createElement(i.a,null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(_,{currentUser:o})),r.a.createElement("div",{className:"col-md"},r.a.createElement(ae,{currentUser:o}))))},re=a(169),oe=a(157),ce=a(156),le=a(76),ie=a.n(le),se=a(155),ue=a(120),me=a(154),fe=Object(me.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function pe(){var e=r.a.useState(void 0),t=Object(l.a)(e,2),a=t[0],n=t[1];function o(){return(o=Object(I.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.collection("users").doc(a),e.next=3,t.get();case 3:(n=e.sent).exists&&c(n.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(){var e=Object(I.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=de(t),e.next=3,v.collection("users").doc(a).set(n);case 3:r=e.sent,console.log("Set logged in user: ",r),window.location.href="".concat("/agile-poker","/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=fe();return r.a.createElement(se.a,{component:"main",maxWidth:"xs"},r.a.createElement(ce.a,null),r.a.createElement("div",{className:i.paper},r.a.createElement(re.a,{className:i.avatar},r.a.createElement(ie.a,null)),r.a.createElement(ue.a,{component:"h1",variant:"h5"},"Agile Poker Table"),r.a.createElement("form",{className:i.form,onSubmit:function(e){e.preventDefault(),a&&(function(){o.apply(this,arguments)}(),function(e){sessionStorage.setItem("agilePokerUserName",e)}(a))},noValidate:!0},r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){n(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"userName",autoComplete:"email",autoFocus:!0}),r.a.createElement(oe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit},"Enter"))))}var de=function(e){return{userName:e.userName,isOnline:!0,isActive:!0,memberSince:e.memberSince,team:e.team,role:e.role}};function ve(){var e=P();return r.a.createElement("div",null,e?r.a.createElement(ne,{userName:e}):r.a.createElement(pe,null))}var Ee=a(164),he=a(158);function ge(){return r.a.createElement(ue.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(he.a,{color:"inherit",href:"https://github.com/saurabhpro/"},"Saurabh")," ",(new Date).getFullYear(),".")}var be=a(159),ye=a(160),ke=a(161),Ne=a(162),Oe=a(77),we=a.n(Oe),Ce=a(78),je=a.n(Ce);function xe(){var e=P();sessionStorage.removeItem("agilePokerUserName"),function(e){Se.apply(this,arguments)}(e)}function Se(){return(Se=Object(I.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.collection("users").doc(t),e.prev=1,e.next=4,a.set({isOnline:!1},{merge:!0});case 4:n=e.sent,console.log("Set: ",n),window.location.href="".concat("/agile-poker","/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var Ue=Object(me.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap",backgroundColor:"white"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},fab:{height:"3em",width:"3em"}}})),Ie=function(){var e=Ue(),t=r.a.useState(P()),a=Object(l.a)(t,2),n=a[0],o=a[1],c=!!n;return r.a.createElement("div",null,r.a.createElement(be.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(ye.a,{className:e.toolbar},r.a.createElement(ue.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle},"Agile Poker"),r.a.createElement("nav",null),c&&r.a.createElement("div",null," ",r.a.createElement(H.a,{title:"Profile",arrow:!0},r.a.createElement(ke.a,{color:"primary",className:e.fab,onClick:function(){return alert("you found a hidden feature ;)")}},r.a.createElement(we.a,null))),r.a.createElement(H.a,{title:"Logout",arrow:!0},r.a.createElement(Ne.a,{onClick:function(){return xe(),void o(void 0)}},r.a.createElement(ke.a,{color:"secondary",className:e.fab},r.a.createElement(je.a,null))))))))},Pe=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(Ie,null)),r.a.createElement(ve,null),r.a.createElement("footer",null,r.a.createElement(Ee.a,{mt:8},r.a.createElement(ge,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){},64:function(e,t,a){},69:function(e,t,a){e.exports=a.p+"static/media/infinity.cf7b1a96.svg"},95:function(e,t,a){e.exports=a(117)}},[[95,1,2]]]);
//# sourceMappingURL=main.5dab0b91.chunk.js.map