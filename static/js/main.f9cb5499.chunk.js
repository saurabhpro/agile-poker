(this["webpackJsonpagile-poker"]=this["webpackJsonpagile-poker"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},112:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(101),a(102),a(103),a(10)),i=a(5),s=a.n(i),u=a(156),m=a(81),f=a(150),p=a(154),d=a(74),v=a.n(d),E=(r.a.createContext(null),a(40)),h=a.n(E),g=(a(106),a(108),{apiKey:"AIzaSyB7eDqSi97maZL5LjOSBrnbRUrqDVOKuVw",authDomain:"agile-poker-sk.firebaseapp.com",databaseURL:"https://agile-poker-sk.firebaseio.com",projectId:"agile-poker-sk",storageBucket:"agile-poker-sk.appspot.com",messagingSenderId:"243041283381",appId:"1:243041283381:web:59f749904068703030307c",measurementId:"G-PLT1CHSW9K"});h.a.initializeApp(g);h.a.auth;var b=h.a.firestore(),y=h.a.firestore.FieldValue.serverTimestamp(),k=b,O=a(66),w=a(67),N=a(45),j=a(83),C=a(80),x=a(168),S=(a(112),a(68)),U=a.n(S),I=function(e){Object(j.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={value:{storyPoint:n.props.value,style:n.props.style}},n.getDisplayableValue=function(){return"Infinity"!==n.state.value.storyPoint?n.state.value.storyPoint:r.a.createElement(x.a.Img,{className:"pokerCard__infinity",variant:"center",src:U.a,alt:"Infinity"})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.onClick=n.onClick.bind(Object(N.a)(n)),n}return Object(w.a)(a,[{key:"render",value:function(){var e=this,t=this.getDisplayableValue(),a=this.state.value;return r.a.createElement("div",null,r.a.createElement(x.a,{style:a.style,className:"m-2 pokerCard",id:a.storyPoint,onClick:function(){return e.onClick(a.storyPoint)}},r.a.createElement(x.a.Body,null,r.a.createElement("h4",null,t)),this.props.footer&&r.a.createElement("p",{className:"pokerCard__footer"},this.props.footer)))}}]),a}(n.Component),T=(a(63),a(69)),P=function(e){var t=e.currentUser,a=r.a.useState(new Map),n=Object(l.a)(a,2),o=n[0],c=n[1];r.a.useEffect((function(){var e=k.collection("result").doc(t.team),a=new Map,n=e.onSnapshot((function(e){console.log("Received query snapshot of ".concat(e.data())),e.data().members||(window.location.href="".concat("/agile-poker","/")),e.data().members.forEach((function(e){e.member&&e.storyPoint&&a.set(e.member,e.storyPoint)})),function(e,t){var a;if(e.size!==t.size)return!1;var n,r=Object(T.a)(e);try{for(r.s();!(n=r.n()).done;){var o=Object(l.a)(n.value,2),c=o[0],i=o[1];if((a=t.get(c))!==i||void 0===a&&!t.has(c))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}(a,o)||c(a)}),(function(e){console.log("Encountered error: ".concat(e))}));return function(){n()}}),[o,t.team]);return r.a.createElement("div",null,o&&o.size>0&&r.a.createElement(f.a,{className:"cards noHover",style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return o.forEach((function(t,a){console.log(t,a),e.push(r.a.createElement(I,{key:a,value:t,style:{width:"10rem",height:"15em",background:"#0047ab",color:"white",fontWeight:"bold"},footer:a.toUpperCase()}))})),e}()))},M=a(14),R=a.n(M),B=a(82),D=a(21),A=function(){return sessionStorage.getItem("agilePokerUserName")||""},_=function(){var e=Object(D.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=A()),a=k.collection("users").doc(t),e.next=4,a.get();case 4:return n=e.sent,console.log("Currently Logged in User Result: ",n.data()),e.abrupt("return",Object(B.a)({},n.data()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(D.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Cleared Tasks for: ",t),e.next=3,k.collection("result").doc(t).set({});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(D.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("result").doc(t).get();case 2:if(!(a=e.sent).exists){e.next=6;break}return console.log(a.data()),e.abrupt("return",a.data());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(D.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("result").doc(t).set({taskId:a,members:[]});case 2:n=e.sent,console.log("Stored Result: ",a," ",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function L(){return(L=Object(D.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.collection("users").doc(t),e.next=3,a.set({isOnline:!1},{merge:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(D.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.collection("users").doc(t),e.next=3,a.set({isOnline:!0},{merge:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=a(169);function K(e){var t=e.currentUser,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(void 0),u=Object(l.a)(s,2),d=u[0],E=u[1],h=Object(n.useState)(!1),g=Object(l.a)(h,2),b=g[0],y=g[1];Object(n.useEffect)((function(){var e=k.collection("points").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().numeric}));i(t[0])}));return function(){e()}}),[]);var O=function(e){E(e),q(t.team).then((function(a){console.log(a),a&&a.taskId&&(k.collection("result").doc(t.team).set({members:[].concat(Object(m.a)(a.members),[{member:t.userName,storyPoint:e}])},{merge:!0}).then((function(){console.log("Stored Result of pokering")})),y(!0),i([e]))}))};return r.a.createElement("div",null,!b&&"PRODUCT OWNER"===(null===t||void 0===t?void 0:t.role.toUpperCase())&&r.a.createElement(F.a,{title:"Show Result"},r.a.createElement(p.a,{color:"secondary",className:"float-right",style:{borderColor:"black"},onClick:function(){return y(!0)}},r.a.createElement(v.a,null))),b?r.a.createElement(P,{currentUser:t}):r.a.createElement(f.a,{className:"cards",style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return c.sort((function(e,t){return e-t})).forEach((function(t){var a;e.push(r.a.createElement(I,{key:t,value:t,style:(a=t,{width:"10rem",height:"15em",disabled:d!==a}),onClick:O}))})),e}()))}function G(e){var t=e.currentUser;return r.a.createElement("div",null,r.a.createElement(K,{currentUser:t}))}var H=a(155),J=a(170),Y=(a(65),a(165)),Z=function(e){var t=e.team,a=e.role,n=e.setShowReset,o=r.a.useState(),c=Object(l.a)(o,2),i=c[0],s=c[1],u=r.a.useState("TEAM MEMBER"===a),m=Object(l.a)(u,2),f=m[0],p=m[1];r.a.useEffect((function(){var e=k.collection("result").doc(t).onSnapshot((function(e){e.data()&&e.data().taskId&&(s(e.data().taskId.toUpperCase()),p(!0),n(!0))}));return function(){e()}}),[i,t,n]);return r.a.createElement("div",null,f?r.a.createElement("h2",{className:"my-2 text-center",style:{color:"turquoise"}},i):r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){s(e.target.value)},fullWidth:!0,id:"taskId",label:"Task Id",name:"taskId",autoFocus:!0,onKeyPress:function(e){if(13===e.charCode){e.preventDefault();var a=e.target.value;z(t,a),p(!0),s(a.toUpperCase()),n(!0)}},placeholder:i}))},$=function(e){var t=e.currentUser,a=e.style,n=r.a.useState(!1),o=Object(l.a)(n,2),c=o[0],i=o[1];return r.a.createElement(x.a,{className:"rightCard",style:a},r.a.createElement(x.a.Body,null,r.a.createElement(x.a.Title,{className:"title"},"Poker"),r.a.createElement(x.a.Text,{className:"text"},t.userName.toUpperCase()),r.a.createElement("p",{className:"text"},t.role?t.role.toUpperCase():"TEAM MEMBER"),r.a.createElement(Z,{team:t.team,role:t.role.toUpperCase(),setShowReset:i}),c&&"TEAM MEMBER"!==t.role.toUpperCase()&&r.a.createElement("div",null," ",r.a.createElement(J.a,{block:!0,onClick:function(){W(t.team,"").then((function(){window.location.href="".concat("/agile-poker","/"),console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))},variant:"light"},"Reset"))))},Q=a(76),X=a.n(Q),ee=a(75),te=a.n(ee),ae=(a(116),function(e){var t=e.usr;return r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{className:"teamMember__details"},r.a.createElement("p",{className:"text-capitalize"},t.userName),r.a.createElement("span",null,t.isOnline?re():ne())))}),ne=function(){return r.a.createElement(F.a,{title:"offline",placement:"right-start"},r.a.createElement(te.a,{className:"teamMember__offline"}))},re=function(){return r.a.createElement(F.a,{title:"connected",placement:"right-start"},r.a.createElement(X.a,{className:"teamMember__online"}))};function oe(e){var t=e.team,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){var e=[],a=k.collection("users").onSnapshot((function(a){a.docs.map((function(e){return e.data()})).filter((function(e){return e.team.toUpperCase()===t})).forEach((function(t){e.push(t)})),(!c&&e||!function(e,t){if(e.length!==t.length)return!1;var a=!0;return e.forEach((function(e){t.forEach((function(t){var n=!0;e.userName===t.userName&&((n=n&&t.isOnline===e.isOnline)||console.log("isOnline"," ",t.isOnline," ",e.isOnline)),a=a&&n}))})),a}(c,e))&&(console.log(c,"=>",e),i(e))}));return function(){a()}}),[c,t]),r.a.createElement("div",null,c.filter((function(e){return e.isActive&&e.team.toUpperCase()===t})).slice(0,7).map((function(e){return r.a.createElement(ae,{key:e.userName,usr:e})})))}a(117);var ce=function(e){var t=e.className,a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){c||_().then((function(e){return i(e.team.toUpperCase())}))}),[c]),r.a.createElement("div",null,c&&r.a.createElement("div",{className:"team"},r.a.createElement("div",{className:"mb-2 team__title"},r.a.createElement("h5",{className:t},"".concat(c.toUpperCase()))),r.a.createElement(oe,{team:c})))},le=function(e){var t=e.style;return r.a.createElement(x.a,{className:"rightCard teamCard",style:t},r.a.createElement(x.a.Body,null,r.a.createElement(ce,{className:"title"})))},ie={border:"none"};function se(e){var t=e.currentUser;return r.a.createElement("div",null,t&&r.a.createElement(H.a,{className:"justify-content-center"},r.a.createElement($,{currentUser:t,style:ie}),r.a.createElement(le,{style:ie})))}G.propTypes={currentUser:s.a.object.isRequired};var ue=function(e){var t=e.userName,a=r.a.useState(),n=Object(l.a)(a,2),o=n[0],c=n[1];return r.a.useEffect((function(){o||_(t).then((function(e){c(e),e.isOnline||function(e){V.apply(this,arguments)}(t)}))}),[o,t]),r.a.createElement("div",{className:"container-md content-justify-center-sm",style:{flexGrow:3}},o&&r.a.createElement(u.a,null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(G,{currentUser:o})),r.a.createElement("div",{className:"col-md"},r.a.createElement(se,{currentUser:o}))))},me=a(171),fe=a(160),pe=a(159),de=a(77),ve=a.n(de),Ee=a(158),he=a(121),ge=a(157),be=Object(ge.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ye(){var e=r.a.useState(void 0),t=Object(l.a)(e,2),a=t[0],n=t[1];function o(){return(o=Object(D.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.collection("users").doc(a),e.next=3,t.get();case 3:(n=e.sent).exists||c(n.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(){var e=Object(D.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?ke(t):Oe(a),e.next=3,k.collection("users").doc(a).set(n);case 3:r=e.sent,console.log("Set logged in user: ",r),window.location.href="".concat("/agile-poker","/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=be();return r.a.createElement(Ee.a,{component:"main",maxWidth:"xs"},r.a.createElement(pe.a,null),r.a.createElement("div",{className:i.paper},r.a.createElement(me.a,{className:i.avatar},r.a.createElement(ve.a,null)),r.a.createElement(he.a,{component:"h1",variant:"h5"},"Agile Poker Table"),r.a.createElement("form",{className:i.form,onSubmit:function(e){e.preventDefault(),a&&(function(){o.apply(this,arguments)}(),function(e){sessionStorage.setItem("agilePokerUserName",e)}(a))},noValidate:!0},r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){n(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"userName",autoComplete:"email",autoFocus:!0}),r.a.createElement(fe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit},"Enter"))))}var ke=function(e){return{userName:e.userName,isOnline:!0,isActive:!0,memberSince:e.memberSince,team:e.team,role:e.role}},Oe=function(e){return{userName:e,isOnline:!0,isActive:!0,memberSince:y,team:"R2Unit",role:"Team Member"}};function we(){var e=A();return r.a.createElement("div",null,e?r.a.createElement(ue,{userName:e}):r.a.createElement(ye,null))}var Ne=a(166),je=a(161);function Ce(){return r.a.createElement(he.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(je.a,{color:"inherit",href:"https://github.com/"},"Saurabh")," ",(new Date).getFullYear(),".")}var xe=a(162),Se=a(163),Ue=a(164),Ie=a(79),Te=a.n(Ie),Pe=a(78),Me=a.n(Pe);function Re(){var e=A();Be(e),sessionStorage.removeItem("agilePokerUserName")}var Be=function(e){(function(e){return L.apply(this,arguments)})(e).then((function(){console.log("logging out"),window.location.href="".concat("/agile-poker","/")})).catch((function(e){console.error(e)}))},De=Object(ge.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},fab:{height:"3em",width:"3em"}}})),Ae=function(){var e=De(),t=r.a.useState(A()),a=Object(l.a)(t,2),n=a[0],o=a[1],c=!!n;return r.a.createElement("div",null,r.a.createElement(xe.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(Se.a,{className:e.toolbar},r.a.createElement(he.a,{variant:"h6",color:"light",noWrap:!0,className:e.toolbarTitle},"Agile Poker"),r.a.createElement("nav",null),c&&r.a.createElement("div",null,r.a.createElement(We,{classes:e}),r.a.createElement(_e,{classes:e,clearSessionStore:function(){Re(),o(void 0)}})))))},_e=function(e){var t=e.classes,a=e.clearSessionStore;return r.a.createElement(F.a,{title:"Logout",arrow:!0},r.a.createElement(p.a,{onClick:function(){return a()}},r.a.createElement(Ue.a,{color:"secondary",className:t.fab},r.a.createElement(Me.a,null))))},We=function(e){var t=e.classes;return r.a.createElement(F.a,{title:"Profile",arrow:!0},r.a.createElement(Ue.a,{color:"primary",className:t.fab,onClick:function(){return alert("you found a hidden feature ;)")}},r.a.createElement(Te.a,null)))},qe=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(Ae,null)),r.a.createElement(we,null),r.a.createElement("footer",null,r.a.createElement(Ne.a,{mt:8},r.a.createElement(Ce,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){},65:function(e,t,a){},68:function(e,t,a){e.exports=a.p+"static/media/infinity.cf7b1a96.svg"},96:function(e,t,a){e.exports=a(118)}},[[96,1,2]]]);
//# sourceMappingURL=main.f9cb5499.chunk.js.map