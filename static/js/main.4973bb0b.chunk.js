(this["webpackJsonpagile-poker"]=this["webpackJsonpagile-poker"]||[]).push([[0],{105:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(95),a(96),a(97),a(149)),i=a(14),s=a(144),u=a(63),m=a(64),f=a(41),p=a(76),d=a(77),v=a(162),E=(a(98),a(65)),h=a.n(E),g=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={value:{storyPoint:n.props.value,style:n.props.style}},n.getDisplayableValue=function(){return"Infinity"!==n.state.value.storyPoint?n.state.value.storyPoint:r.a.createElement(v.a.Img,{variant:"center",src:h.a,alt:"Infinity"})},n.onClick=function(e){n.props.onClick(e)},n.onClick=n.onClick.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.getDisplayableValue(),a=this.state.value;return r.a.createElement("div",null,r.a.createElement(v.a,{style:a.style,className:"m-1 pokerCard",id:a.storyPoint,onClick:function(){return e.onClick(a.storyPoint)}},r.a.createElement(v.a.Body,null,r.a.createElement("h4",null,t)),this.props.footer&&r.a.createElement(v.a.Footer,{className:"pokerCard__footer"},this.props.footer)))}}]),a}(n.Component),b=(r.a.createContext(null),a(50)),y=a.n(b),k=(a(99),a(101),{apiKey:"AIzaSyB7eDqSi97maZL5LjOSBrnbRUrqDVOKuVw",authDomain:"agile-poker-sk.firebaseapp.com",databaseURL:"https://agile-poker-sk.firebaseio.com",projectId:"agile-poker-sk",storageBucket:"agile-poker-sk.appspot.com",messagingSenderId:"243041283381",appId:"1:243041283381:web:59f749904068703030307c",measurementId:"G-PLT1CHSW9K"});y.a.initializeApp(k);y.a.auth;var N=y.a.firestore(),O=function(){return sessionStorage.getItem("agilePokerUserName")||""},w=a(66),j=function(e){var t=r.a.useState(new Map),a=Object(i.a)(t,2),n=a[0],o=a[1];r.a.useEffect((function(){var e=N.collection("result").doc("IND-01").collection("users"),t=new Map,a=e.onSnapshot((function(e){console.log("Received query snapshot of size ".concat(e.size)),e.forEach((function(e){t.set(e.id,e.data().storyPoint)})),c(t,n)||o(t)}),(function(e){console.log("Encountered error: ".concat(e))}));return function(){a()}}),[n]);var c=function(e,t){var a;if(e.size!==t.size)return!1;var n,r=Object(w.a)(e);try{for(r.s();!(n=r.n()).done;){var o=Object(i.a)(n.value,2),c=o[0],l=o[1];if((a=t.get(c))!==l||void 0===a&&!t.has(c))return!1}}catch(s){r.e(s)}finally{r.f()}return!0};return r.a.createElement("div",null,n&&r.a.createElement(s.a,{style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return n.forEach((function(t,a){e.push(r.a.createElement(g,{key:a,value:t,style:{width:"10rem",height:"15em",background:"pink"},footer:a}))})),e}()))};function S(){var e=O(),t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(void 0),u=Object(i.a)(l,2),m=u[0],f=u[1],p=Object(n.useState)(!1),d=Object(i.a)(p,2),v=d[0],E=d[1];Object(n.useEffect)((function(){var e=N.collection("points").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().numeric}));c(t[0])}));return function(){e()}}),[]);var h=function(t){f(t);var a=N.collection("result").doc("IND-01").collection("users").doc(e).set({storyPoint:t});console.log("Stored Result: ",a),E(!0),c([t])};return r.a.createElement("div",null,v?r.a.createElement(j,null):r.a.createElement(s.a,{style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return o.sort((function(e,t){return e-t})).forEach((function(t){var a;e.push(r.a.createElement(g,{key:t,value:t,style:(a=t,{width:"10rem",height:"15em",disabled:m!==a}),onClick:h}))})),e}()))}function x(){return r.a.createElement("div",null,r.a.createElement(S,null))}var C=a(164),I=a(148),P=a(72),B=a.n(P),D=a(71),T=a.n(D),U=a(163);a(105);function _(e){var t=e.team,a=Object(n.useState)([]),o=Object(i.a)(a,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){var e=[],a=N.collection("users").onSnapshot((function(a){a.docs.map((function(e){return e.data()})).filter((function(e){return e.team.toUpperCase()===t})).forEach((function(t){e.push(t)})),(!c&&e||!z(c,e))&&(console.log(c,"=>",e),l(e))}));return function(){a()}}),[c]),r.a.createElement("div",null,c.filter((function(e){return e.isActive&&e.team.toUpperCase()===t})).slice(0,7).map((function(e){return r.a.createElement(A,{key:e.userName,usr:e})})))}var A=function(e){var t=e.usr;return r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{className:"teamMember__details"},r.a.createElement("p",null,t.userName.toUpperCase()),r.a.createElement("span",null,t.isOnline?W():M())))},M=function(){return r.a.createElement(U.a,{title:"offline",placement:"right-start"},r.a.createElement(T.a,{className:"teamMember__offline"}))},W=function(){return r.a.createElement(U.a,{title:"connected",placement:"right-start"},r.a.createElement(B.a,{className:"teamMember__online"}))},z=function(e,t){if(e.length!==t.length)return!1;var a=!0;return e.forEach((function(e){t.forEach((function(t){var n=!0;e.userName===t.userName&&((n=n&&t.isOnline===e.isOnline)||console.log("isOnline"," ",t.isOnline," ",e.isOnline)),a=a&&n}))})),a},L=(a(110),function(e){var t=e.className,a=O(),o=Object(n.useState)(void 0),c=Object(i.a)(o,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){var e=void 0;N.collection("users").get().then((function(t){t.forEach((function(t){l||t.id!==a||(e=t.data().team.toUpperCase())}))})).then((function(){return!l&&s(e)}))}),[l]),r.a.createElement("div",null,l&&r.a.createElement("div",{className:"team"},r.a.createElement("div",{className:"team__title"},r.a.createElement("h5",{className:t},"".concat(l.toUpperCase()))),r.a.createElement(_,{team:l})))}),R=(a(111),{border:"none"});function V(e){var t=e.userName;return r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(v.a,{className:"rightCard",style:R},r.a.createElement(v.a.Body,null,r.a.createElement(v.a.Title,{className:"title"},"Poker"),r.a.createElement(v.a.Text,{className:"text"},t),r.a.createElement("p",{className:"text"},"Scrum Master"),r.a.createElement(C.a,{block:!0,onClick:function(){window.location.href="".concat("/agile-poker","/")},variant:"Link"},"Reset"))),r.a.createElement(v.a,{className:"rightCard teamCard",style:R},r.a.createElement(v.a.Body,null,r.a.createElement(L,{className:"title"})))))}var q=function(e){var t=e.userName;return r.a.createElement("div",{className:"container-md content-justify-center-sm",style:{flexGrow:3}},r.a.createElement(l.a,null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(x,null)),r.a.createElement("div",{className:"col-md"},r.a.createElement(V,{userName:t}))))},F=a(25),G=a.n(F),K=a(37),J=a(165),H=a(153),Y=a(152),Z=a(159),$=a(73),Q=a.n($),X=a(151),ee=a(115),te=a(150),ae=Object(te.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ne(){var e=r.a.useState(void 0),t=Object(i.a)(e,2),a=t[0],n=t[1];function o(){return(o=Object(K.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.collection("users").doc(a),e.next=3,t.get();case 3:(n=e.sent).exists&&c(n.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=Object(K.a)(G.a.mark((function e(t){var n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userName:t.userName,isOnline:!0,isActive:!0,memberSince:t.memberSince,team:t.team},e.next=3,N.collection("users").doc(a).set(n);case 3:r=e.sent,sessionStorage.setItem("agilePokerUserName",a),console.log("Set: ",r),window.location.href="".concat("/agile-poker","/");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=ae();return r.a.createElement(X.a,{component:"main",maxWidth:"xs"},r.a.createElement(Y.a,null),r.a.createElement("div",{className:s.paper},r.a.createElement(J.a,{className:s.avatar},r.a.createElement(Q.a,null)),r.a.createElement(ee.a,{component:"h1",variant:"h5"},"Agile Poker Table"),r.a.createElement("form",{className:s.form,onSubmit:function(e){e.preventDefault(),a&&function(){o.apply(this,arguments)}()},noValidate:!0},r.a.createElement(Z.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){n(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"userName",autoComplete:"email",autoFocus:!0}),r.a.createElement(H.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit},"Enter"))))}function re(){var e=O();return r.a.createElement("div",null,e?r.a.createElement(q,{userName:e}):r.a.createElement(ne,null))}var oe=a(160),ce=a(154);function le(){return r.a.createElement(ee.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ce.a,{color:"inherit",href:"https://github.com/saurabhpro/"},"Saurabh")," ",(new Date).getFullYear(),".")}var ie=a(155),se=a(156),ue=a(157),me=a(158),fe=a(74),pe=a.n(fe),de=a(75),ve=a.n(de);function Ee(){var e=O();sessionStorage.removeItem("agilePokerUserName"),function(e){he.apply(this,arguments)}(e)}function he(){return(he=Object(K.a)(G.a.mark((function e(t){var a,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.collection("users").doc(t),e.prev=1,e.next=4,a.set({isOnline:!1},{merge:!0});case 4:n=e.sent,console.log("Set: ",n),window.location.href="".concat("/agile-poker","/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var ge=Object(te.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap",backgroundColor:"white"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},fab:{height:"3em",width:"3em"}}})),be=function(){var e=ge(),t=r.a.useState(O()),a=Object(i.a)(t,2),n=a[0],o=a[1],c=!!n;return r.a.createElement("div",null,r.a.createElement(ie.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(se.a,{className:e.toolbar},r.a.createElement(ee.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle},"Agile Poker"),r.a.createElement("nav",null),c&&r.a.createElement("div",null," ",r.a.createElement(U.a,{title:"Profile",arrow:!0},r.a.createElement(ue.a,null,r.a.createElement(me.a,{color:"primary",className:e.fab},r.a.createElement(pe.a,null)))),r.a.createElement(U.a,{title:"Logout",arrow:!0},r.a.createElement(ue.a,{onClick:function(){return Ee(),void o(void 0)}},r.a.createElement(me.a,{color:"secondary",className:e.fab},r.a.createElement(ve.a,null))))))))},ye=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(be,null)),r.a.createElement(re,null),r.a.createElement("footer",null,r.a.createElement(oe.a,{mt:8},r.a.createElement(le,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a.p+"static/media/infinity.cf7b1a96.svg"},90:function(e,t,a){e.exports=a(113)},95:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.4973bb0b.chunk.js.map