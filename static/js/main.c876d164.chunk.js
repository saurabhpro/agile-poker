(this["webpackJsonpagile-poker"]=this["webpackJsonpagile-poker"]||[]).push([[0],{103:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=(a(93),a(94),a(95),a(147)),i=a(14),s=a(142),u=a(62),m=a(63),f=a(41),p=a(74),d=a(75),v=a(160),E=(a(96),a(64)),h=a.n(E),g=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={value:{storyPoint:n.props.value,style:n.props.style}},n.getDisplayableValue=function(){return"Infinity"!==n.state.value.storyPoint?n.state.value.storyPoint:r.a.createElement(v.a.Img,{variant:"center",src:h.a,alt:"Infinity"})},n.onClick=function(e){n.props.onClick(e)},n.onClick=n.onClick.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.getDisplayableValue(),a=this.state.value;return r.a.createElement("div",null,r.a.createElement(v.a,{style:a.style,className:"m-1 pokerCard",id:a.storyPoint,onClick:function(){return e.onClick(a.storyPoint)}},r.a.createElement(v.a.Body,null,r.a.createElement("h4",null,t)),this.props.footer))}}]),a}(n.Component),b=(r.a.createContext(null),a(49)),y=a.n(b),k=(a(97),a(99),{apiKey:"AIzaSyB7eDqSi97maZL5LjOSBrnbRUrqDVOKuVw",authDomain:"agile-poker-sk.firebaseapp.com",databaseURL:"https://agile-poker-sk.firebaseio.com",projectId:"agile-poker-sk",storageBucket:"agile-poker-sk.appspot.com",messagingSenderId:"243041283381",appId:"1:243041283381:web:59f749904068703030307c",measurementId:"G-PLT1CHSW9K"});y.a.initializeApp(k);y.a.auth;var N=y.a.firestore(),w=function(){return sessionStorage.getItem("agilePokerUserName")||""},O=function(e){var t=r.a.useState(new Map),a=Object(i.a)(t,2),n=a[0],c=a[1];r.a.useEffect((function(){var e=N.collection("result").doc("IND-01").collection("users"),t=new Map,a=e.onSnapshot((function(e){console.log("Received query snapshot of size ".concat(e.size)),e.forEach((function(e){t.set(e.id,e.data().storyPoint)})),c(t)}),(function(e){console.log("Encountered error: ".concat(e))}));return function(){a()}}),[]);return r.a.createElement("div",null,n&&r.a.createElement(s.a,{style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return n.forEach((function(t,a){e.push(r.a.createElement(g,{key:a,value:t,style:{width:"10rem",height:"15em",background:"green"},footer:a}))})),e}()))};function S(){var e=w(),t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(void 0),u=Object(i.a)(l,2),m=u[0],f=u[1],p=Object(n.useState)(!1),d=Object(i.a)(p,2),v=d[0],E=d[1];Object(n.useEffect)((function(){var e=N.collection("points").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().numeric}));o(t[0])}));return function(){e()}}),[]);var h=function(t){f(t);var a=N.collection("result").doc("IND-01").collection("users").doc(e).set({storyPoint:t});console.log("Stored Result: ",a),E(!0),o([t])};return r.a.createElement("div",null,v?r.a.createElement(O,null):r.a.createElement(s.a,{style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return c.sort((function(e,t){return e-t})).forEach((function(t){var a;e.push(r.a.createElement(g,{key:t,value:t,style:(a=t,{width:"10rem",height:"15em",disabled:m!==a}),onClick:h}))})),e}()))}function j(){return r.a.createElement("div",null,r.a.createElement(S,null))}var x=a(162),C=a(146),I=a(70),P=a.n(I),B=a(69),D=a.n(B),T=a(161);a(103);function U(e){var t=e.team,a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){var e=[],a=N.collection("users").onSnapshot((function(a){a.docs.map((function(e){return e.data()})).filter((function(e){return e.team.toUpperCase()===t})).forEach((function(t){e.push(t)})),(!o&&e||!_(o,e))&&(console.log(o,"=>",e),l(e))}));return function(){a()}}),[o]),r.a.createElement("div",null,o.filter((function(e){return e.isActive&&e.team.toUpperCase()===t})).slice(0,7).map((function(e){return r.a.createElement(A,{key:e.userName,usr:e})})))}var A=function(e){var t=e.usr;return r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{className:"teamMember__details"},r.a.createElement("p",null,t.userName.toUpperCase()),r.a.createElement("span",null,t.isOnline?W():M())))},M=function(){return r.a.createElement(T.a,{title:"offline",placement:"right-start"},r.a.createElement(D.a,{className:"teamMember__offline"}))},W=function(){return r.a.createElement(T.a,{title:"connected",placement:"right-start"},r.a.createElement(P.a,{className:"teamMember__online"}))},_=function(e,t){if(e.length!==t.length)return!1;var a=!0;return e.forEach((function(e){t.forEach((function(t){var n=!0;e.userName===t.userName&&((n=n&&t.isOnline===e.isOnline)||console.log("isOnline"," ",t.isOnline," ",e.isOnline)),a=a&&n}))})),a},L=(a(108),function(e){var t=e.className,a=w(),c=Object(n.useState)(void 0),o=Object(i.a)(c,2),l=o[0],s=o[1];return Object(n.useEffect)((function(){var e=void 0;N.collection("users").get().then((function(t){t.forEach((function(t){l||t.id!==a||(e=t.data().team.toUpperCase())}))})).then((function(){return!l&&s(e)}))}),[l]),r.a.createElement("div",null,l&&r.a.createElement("div",{className:"team"},r.a.createElement("div",{className:"team__title"},r.a.createElement("h5",{className:t},"".concat(l.toUpperCase()))),r.a.createElement(U,{team:l})))}),R=(a(109),{border:"none"});function V(e){var t=e.userName;return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(v.a,{className:"rightCard",style:R},r.a.createElement(v.a.Body,null,r.a.createElement(v.a.Title,{className:"title"},"Poker"),r.a.createElement(v.a.Text,{className:"text"},t),r.a.createElement("p",{className:"text"},"Scrum Master"),r.a.createElement(x.a,{block:!0,onClick:function(){window.location.href="".concat("/agile-poker","/")},variant:"Link"},"Reset"))),r.a.createElement(v.a,{className:"rightCard teamCard",style:R},r.a.createElement(v.a.Body,null,r.a.createElement(L,{className:"title"})))))}var q=function(e){var t=e.userName;return r.a.createElement("div",{className:"container-md content-justify-center-sm",style:{flexGrow:3}},r.a.createElement(l.a,null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(j,null)),r.a.createElement("div",{className:"col-md"},r.a.createElement(V,{userName:t}))))},z=a(25),G=a.n(z),K=a(37),F=a(163),J=a(151),H=a(150),Y=a(157),Z=a(71),$=a.n(Z),Q=a(149),X=a(113),ee=a(148),te=Object(ee.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ae(){var e=r.a.useState(void 0),t=Object(i.a)(e,2),a=t[0],n=t[1];function c(){return(c=Object(K.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.collection("users").doc(a),e.next=3,t.get();case 3:(n=e.sent).exists&&o(n.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return(l=Object(K.a)(G.a.mark((function e(t){var n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userName:t.userName,isOnline:!0,isActive:!0,memberSince:t.memberSince,team:t.team},e.next=3,N.collection("users").doc(a).set(n);case 3:r=e.sent,sessionStorage.setItem("agilePokerUserName",a),console.log("Set: ",r),window.location.href="".concat("/agile-poker","/");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=te();return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},r.a.createElement(H.a,null),r.a.createElement("div",{className:s.paper},r.a.createElement(F.a,{className:s.avatar},r.a.createElement($.a,null)),r.a.createElement(X.a,{component:"h1",variant:"h5"},"Agile Poker Table"),r.a.createElement("form",{className:s.form,onSubmit:function(e){e.preventDefault(),a&&function(){c.apply(this,arguments)}()},noValidate:!0},r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){n(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"userName",autoComplete:"email",autoFocus:!0}),r.a.createElement(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit},"Enter"))))}function ne(){var e=w();return r.a.createElement("div",null,e?r.a.createElement(q,{userName:e}):r.a.createElement(ae,null))}var re=a(158),ce=a(152);function oe(){return r.a.createElement(X.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ce.a,{color:"inherit",href:"https://github.com/saurabhpro/"},"Saurabh")," ",(new Date).getFullYear(),".")}var le=a(153),ie=a(154),se=a(155),ue=a(156),me=a(72),fe=a.n(me),pe=a(73),de=a.n(pe);function ve(){var e=w();sessionStorage.removeItem("agilePokerUserName"),function(e){Ee.apply(this,arguments)}(e)}function Ee(){return(Ee=Object(K.a)(G.a.mark((function e(t){var a,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.collection("users").doc(t),e.prev=1,e.next=4,a.set({isOnline:!1},{merge:!0});case 4:n=e.sent,console.log("Set: ",n),window.location.href="".concat("/agile-poker","/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var he=Object(ee.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap",backgroundColor:"white"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},fab:{height:"3em",width:"3em"}}})),ge=function(){var e=he(),t=r.a.useState(w()),a=Object(i.a)(t,2),n=a[0],c=a[1],o=!!n;return r.a.createElement("div",null,r.a.createElement(le.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(ie.a,{className:e.toolbar},r.a.createElement(X.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle},"Agile Poker"),r.a.createElement("nav",null),o&&r.a.createElement("div",null," ",r.a.createElement(T.a,{title:"Profile",arrow:!0},r.a.createElement(se.a,null,r.a.createElement(ue.a,{color:"primary",className:e.fab},r.a.createElement(fe.a,null)))),r.a.createElement(T.a,{title:"Logout",arrow:!0},r.a.createElement(se.a,{onClick:function(){return ve(),void c(void 0)}},r.a.createElement(ue.a,{color:"secondary",className:e.fab},r.a.createElement(de.a,null))))))))},be=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(ge,null)),r.a.createElement(ne,null),r.a.createElement("footer",null,r.a.createElement(re.a,{mt:8},r.a.createElement(oe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,a){e.exports=a.p+"static/media/infinity.cf7b1a96.svg"},88:function(e,t,a){e.exports=a(111)},93:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.c876d164.chunk.js.map