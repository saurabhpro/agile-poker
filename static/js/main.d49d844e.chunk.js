(this["webpackJsonpagile-poker"]=this["webpackJsonpagile-poker"]||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),o=(a(93),a(94),a(95),a(25)),i=a.n(o),s=a(34),u=a(16),m=a(163),f=a(148),p=a(146),d=a(157),v=a(65),E=a.n(v),h=a(144),g=a(113),b=a(142),k=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),y=(r.a.createContext(null),a(49)),N=a.n(y),w=(a(99),a(101),{apiKey:"AIzaSyB7eDqSi97maZL5LjOSBrnbRUrqDVOKuVw",authDomain:"agile-poker-sk.firebaseapp.com",databaseURL:"https://agile-poker-sk.firebaseio.com",projectId:"agile-poker-sk",storageBucket:"agile-poker-sk.appspot.com",messagingSenderId:"243041283381",appId:"1:243041283381:web:59f749904068703030307c",measurementId:"G-PLT1CHSW9K"});N.a.initializeApp(w);N.a.auth;var O=N.a.firestore();function j(){var e=r.a.useState(void 0),t=Object(u.a)(e,2),a=t[0],n=t[1];function l(){return(l=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.collection("users").doc(a),e.next=3,t.get();case 3:(n=e.sent).exists&&c(n.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userName:t.userName,isOnline:!0,isActive:!0,memberSince:t.memberSince,team:t.team},e.next=3,O.collection("users").doc(a).set(n);case 3:r=e.sent,sessionStorage.setItem("agilePokerUserName",a),console.log("Set: ",r),window.location.href="".concat("/agile-poker","/");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=k();return r.a.createElement(h.a,{component:"main",maxWidth:"xs"},r.a.createElement(p.a,null),r.a.createElement("div",{className:v.paper},r.a.createElement(m.a,{className:v.avatar},r.a.createElement(E.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h5"},"Agile Poker Table"),r.a.createElement("form",{className:v.form,onSubmit:function(e){e.preventDefault(),a&&function(){l.apply(this,arguments)}()},noValidate:!0},r.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){n(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"userName",autoComplete:"email",autoFocus:!0}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:v.submit},"Enter"))))}function x(){return r.a.createElement("div",null,r.a.createElement(j,null))}var C=a(151),S=a(149),I=a(66),P=a(67),B=a(48),U=a(74),D=a(75),T=a(160),A=(a(107),a(68)),W=a.n(A),_=function(e){Object(D.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={value:{storyPoint:n.props.value,style:n.props.style}},n.getDisplayableValue=function(){return"Infinity"!==n.state.value.storyPoint?n.state.value.storyPoint:r.a.createElement(T.a.Img,{variant:"center",src:W.a,alt:"Infinity"})},n.onClick=function(e){n.props.onClick(e)},n.onClick=n.onClick.bind(Object(B.a)(n)),n}return Object(P.a)(a,[{key:"render",value:function(){var e=this,t=this.getDisplayableValue(),a=this.state.value;return r.a.createElement("div",null,r.a.createElement(T.a,{style:a.style,className:"m-1 pokerCard",id:a.storyPoint,onClick:function(){return e.onClick(a.storyPoint)}},r.a.createElement(T.a.Body,null,r.a.createElement("h4",null,t))))}}]),a}(n.Component);function L(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(void 0),o=Object(u.a)(c,2),i=o[0],s=o[1];Object(n.useEffect)((function(){var e=O.collection("points").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().numeric}));l(t[0])}));return function(){e()}}),[]);var m=function(e){s(e),l([e])};return r.a.createElement(S.a,{style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return a.sort((function(e,t){return e-t})).forEach((function(t){var a;e.push(r.a.createElement(_,{key:t,value:t,style:(a=t,{width:"10rem",height:"15em",disabled:i!==a}),onClick:m}))})),e}())}function M(){return r.a.createElement("div",null,r.a.createElement(L,null))}var V=a(162),q=a(150),G=function(){return sessionStorage.getItem("agilePokerUserName")||""},K=a(70),R=a.n(K),z=a(71),F=a.n(z),J=a(161);a(108);function H(e){var t=e.team,a=Object(n.useState)([]),l=Object(u.a)(a,2),c=l[0],o=l[1];return Object(n.useEffect)((function(){var e=[],a=O.collection("users").onSnapshot((function(a){a.docs.map((function(e){return e.data()})).filter((function(e){return e.team.toUpperCase()===t})).forEach((function(t){e.push(t)})),(!c&&e||!function(e,t){if(e.length!==t.length)return!1;var a=!0;return e.forEach((function(e){t.forEach((function(t){var n=!0;e.userName===t.userName&&((n=n&&t.isOnline===e.isOnline)||console.log("isOnline"," ",t.isOnline," ",e.isOnline)),a=a&&n}))})),a}(c,e))&&(console.log(c,"=>",e),o(e))}));return function(){a()}}),[c]),r.a.createElement("div",null,c.filter((function(e){return e.isActive&&e.team.toUpperCase()===t})).slice(0,7).map((function(e){return r.a.createElement(Y,{key:e.userName,usr:e})})))}function Y(e){var t=e.usr;return r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{className:"teamMember__details"},r.a.createElement("p",null,t.userName.toUpperCase()),r.a.createElement("span",null,t.isOnline?r.a.createElement(J.a,{title:"connected",placement:"right-start"},r.a.createElement(R.a,{className:"teamMember__online"})):r.a.createElement(J.a,{title:"offline",placement:"right-start"},r.a.createElement(F.a,{className:"teamMember__offline"})))))}a(109);var Z=function(e){var t=e.className,a=G(),l=Object(n.useState)(void 0),c=Object(u.a)(l,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){var e=void 0;O.collection("users").get().then((function(t){t.forEach((function(t){o||t.id!==a||(e=t.data().team.toUpperCase())}))})).then((function(){return!o&&i(e)}))}),[o]),r.a.createElement("div",null,o&&r.a.createElement("div",{className:"team"},r.a.createElement("div",{className:"team__title"},r.a.createElement("h5",{className:t},"".concat(o.toUpperCase()))),r.a.createElement(H,{team:o})))},$=(a(110),{border:"none"});function Q(e){var t=e.userName;return r.a.createElement("div",null,r.a.createElement(q.a,null,r.a.createElement(T.a,{className:"rightCard",style:$},r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Title,{className:"title"},"Poker"),r.a.createElement(T.a.Text,{className:"text"},t),r.a.createElement("p",{className:"text"},"Scrum Master"),r.a.createElement(V.a,{block:!0,onClick:function(){window.location.href="".concat("/agile-poker","/")},variant:"Link"},"Reset"))),r.a.createElement(T.a,{className:"rightCard teamCard",style:$},r.a.createElement(T.a.Body,null,r.a.createElement(Z,{className:"title"})))))}var X=function(e){var t=e.userName;return r.a.createElement("div",{className:"container-md content-justify-center-sm",style:{flexGrow:3}},r.a.createElement(C.a,null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(M,null)),r.a.createElement("div",{className:"col-md"},r.a.createElement(Q,{userName:t}))))};function ee(){var e=G();return r.a.createElement("div",null,!e&&r.a.createElement(x,null),e&&r.a.createElement("div",null,r.a.createElement(X,{userName:e})))}var te=a(158),ae=a(152);function ne(){return r.a.createElement(g.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ae.a,{color:"inherit",href:"https://github.com/saurabhpro/"},"Saurabh")," ",(new Date).getFullYear(),".")}var re=a(153),le=a(154),ce=a(155),oe=a(156),ie=a(72),se=a.n(ie),ue=a(73),me=a.n(ue);function fe(){var e=G();sessionStorage.removeItem("agilePokerUserName"),function(e){pe.apply(this,arguments)}(e)}function pe(){return(pe=Object(s.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.collection("users").doc(t),e.prev=1,e.next=4,a.set({isOnline:!1},{merge:!0});case 4:n=e.sent,console.log("Set: ",n),window.location.href="".concat("/agile-poker","/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var de=Object(b.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap",backgroundColor:"white"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},fab:{height:"3em",width:"3em"}}})),ve=function(){var e=de(),t=r.a.useState(G()),a=Object(u.a)(t,2),n=a[0],l=a[1],c=!!n;return r.a.createElement("div",null,r.a.createElement(re.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(le.a,{className:e.toolbar},r.a.createElement(g.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle},"Agile Poker"),r.a.createElement("nav",null),c&&r.a.createElement("div",null," ",r.a.createElement(J.a,{title:"Profile",arrow:!0},r.a.createElement(ce.a,null,r.a.createElement(oe.a,{color:"primary",className:e.fab},r.a.createElement(se.a,null)))),r.a.createElement(J.a,{title:"Logout",arrow:!0},r.a.createElement(ce.a,{onClick:function(){return l(void 0),void fe()}},r.a.createElement(oe.a,{color:"secondary",className:e.fab},r.a.createElement(me.a,null))))))))},Ee=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(ve,null)),r.a.createElement(ee,null),r.a.createElement("footer",null,r.a.createElement(te.a,{mt:8},r.a.createElement(ne,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,a){e.exports=a.p+"static/media/infinity.cf7b1a96.svg"},88:function(e,t,a){e.exports=a(111)},93:function(e,t,a){},94:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.d49d844e.chunk.js.map