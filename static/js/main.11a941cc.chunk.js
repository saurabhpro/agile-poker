(this["webpackJsonpagile-poker"]=this["webpackJsonpagile-poker"]||[]).push([[0],{106:function(e,t,a){},108:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(97),a(98),a(99),a(150)),i=a(13),s=a(145),u=a(64),m=(r.a.createContext(null),a(50)),f=a.n(m),p=(a(100),a(102),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/agile-poker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/agile-poker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/agile-poker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/agile-poker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/agile-poker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/agile-poker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/agile-poker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_APP_ID,measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"/agile-poker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MEASUREMENT_ID});f.a.initializeApp(p);f.a.auth;var E=f.a.firestore(),d=a(65),v=a(66),O=a(41),_=a(77),g=a(79),h=a(163),S=(a(106),a(67)),b=a.n(S),C=function(e){Object(g.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={value:{storyPoint:n.props.value,style:n.props.style}},n.getDisplayableValue=function(){return"Infinity"!==n.state.value.storyPoint?n.state.value.storyPoint:r.a.createElement(h.a.Img,{variant:"center",src:b.a,alt:"Infinity"})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.onClick=n.onClick.bind(Object(O.a)(n)),n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.getDisplayableValue(),a=this.state.value;return r.a.createElement("div",null,r.a.createElement(h.a,{style:a.style,className:"m-1 pokerCard",id:a.storyPoint,onClick:function(){return e.onClick(a.storyPoint)}},r.a.createElement(h.a.Body,null,r.a.createElement("h4",null,t)),this.props.footer&&r.a.createElement(h.a.Footer,{className:"pokerCard__footer"},this.props.footer)))}}]),a}(n.Component),T=function(e,t){var a;if(e.size!==t.size)return!1;var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var o=Object(i.a)(n.value,2),c=o[0],l=o[1];if((a=t.get(c))!==l||void 0===a&&!t.has(c))return!1}}catch(s){r.e(s)}finally{r.f()}return!0},N=function(e){var t=r.a.useState(new Map),a=Object(i.a)(t,2),n=a[0],o=a[1];r.a.useEffect((function(){var e=E.collection("result").doc("IND-01").collection("users"),t=new Map,a=e.onSnapshot((function(e){console.log("Received query snapshot of size ".concat(e.size)),e.forEach((function(e){t.set(e.id,e.data().storyPoint)})),T(t,n)||o(t)}),(function(e){console.log("Encountered error: ".concat(e))}));return function(){a()}}),[n]);return r.a.createElement("div",null,n&&r.a.createElement(s.a,{style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return n.forEach((function(t,a){e.push(r.a.createElement(C,{key:a,value:t,style:{width:"10rem",height:"15em",background:"lightgreen",textDecoration:"none"},footer:a.substring(0,a.indexOf("@")).toUpperCase()}))})),e}()))},y=function(){return sessionStorage.getItem("agilePokerUserName")||""};function P(){var e=y(),t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(void 0),u=Object(i.a)(l,2),m=u[0],f=u[1],p=Object(n.useState)(!1),d=Object(i.a)(p,2),v=d[0],O=d[1];Object(n.useEffect)((function(){var e=E.collection("points").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().numeric}));c(t[0])}));return function(){e()}}),[]);var _=function(t){f(t);var a=E.collection("result").doc("IND-01").collection("users").doc(e).set({storyPoint:t});console.log("Stored Result: ",a),O(!0),c([t])};return r.a.createElement("div",null,v?r.a.createElement(N,null):r.a.createElement(s.a,{style:{flexDirection:"row",marginTop:"10px",marginBottom:"20px"}},function(){var e=[];return o.sort((function(e,t){return e-t})).forEach((function(t){var a;e.push(r.a.createElement(C,{key:t,value:t,style:(a=t,{width:"10rem",height:"15em",disabled:m!==a}),onClick:_}))})),e}()))}function k(){return r.a.createElement("div",null,r.a.createElement(P,null))}var D=a(149),j=a(15),A=a.n(j),R=a(78),w=a(25),U=function(){var e=Object(w.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=y()),a=E.collection("users").doc(t),e.next=4,a.get();case 4:return n=e.sent,console.log("Currently Logged in User Result: ",n.data()),e.abrupt("return",Object(R.a)({},n.data()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(w.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.collection("result").doc(t).delete();case 2:console.log("Deleted all Results: ");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=a(165),I=(a(62),function(e){var t=e.currentUser,a=e.style;return r.a.createElement(h.a,{className:"rightCard",style:a},r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Title,{className:"title"},"Poker"),r.a.createElement(h.a.Text,{className:"text"},t.userName.toUpperCase()),r.a.createElement("p",{className:"text"},t.role?t.role.toUpperCase():"TEAM MEMBER"),("SCRUM MASTER"===t.role.toUpperCase()||"PRODUCT OWNER"===t.role.toUpperCase())&&r.a.createElement(W.a,{block:!0,onClick:function(){return x("IND-01"),void(window.location.href="".concat("/agile-poker","/"))},variant:"Link"},"Reset")))}),K=a(73),B=a.n(K),L=a(72),H=a.n(L),M=a(164);a(108);function V(e){var t=e.team,a=Object(n.useState)([]),o=Object(i.a)(a,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){var e=[],a=E.collection("users").onSnapshot((function(a){a.docs.map((function(e){return e.data()})).filter((function(e){return e.team.toUpperCase()===t})).forEach((function(t){e.push(t)})),(!c&&e||!J(c,e))&&(console.log(c,"=>",e),l(e))}));return function(){a()}}),[c,t]),r.a.createElement("div",null,c.filter((function(e){return e.isActive&&e.team.toUpperCase()===t})).slice(0,7).map((function(e){return r.a.createElement(z,{key:e.userName,usr:e})})))}var z=function(e){var t=e.usr;return r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{className:"teamMember__details"},r.a.createElement("p",null,t.userName.toUpperCase()),r.a.createElement("span",null,t.isOnline?G():F())))},F=function(){return r.a.createElement(M.a,{title:"offline",placement:"right-start"},r.a.createElement(H.a,{className:"teamMember__offline"}))},G=function(){return r.a.createElement(M.a,{title:"connected",placement:"right-start"},r.a.createElement(B.a,{className:"teamMember__online"}))},J=function(e,t){if(e.length!==t.length)return!1;var a=!0;return e.forEach((function(e){t.forEach((function(t){var n=!0;e.userName===t.userName&&((n=n&&t.isOnline===e.isOnline)||console.log("isOnline"," ",t.isOnline," ",e.isOnline)),a=a&&n}))})),a},q=(a(113),function(e){var t=e.className,a=Object(n.useState)(),o=Object(i.a)(a,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){c||U().then((function(e){return l(e.team.toUpperCase())}))}),[c]),r.a.createElement("div",null,c&&r.a.createElement("div",{className:"team"},r.a.createElement("div",{className:"team__title"},r.a.createElement("h5",{className:t},"".concat(c.toUpperCase()))),r.a.createElement(V,{team:c})))}),Y=function(e){var t=e.style;return r.a.createElement(h.a,{className:"rightCard teamCard",style:t},r.a.createElement(h.a.Body,null,r.a.createElement(q,{className:"title"})))},$={border:"none"};function Q(e){var t=e.userName,a=r.a.useState(),n=Object(i.a)(a,2),o=n[0],c=n[1];return r.a.useEffect((function(){o||U(t).then((function(e){return c(e)}))}),[o,t]),r.a.createElement("div",null,o&&r.a.createElement(D.a,{className:"justify-content-center"},r.a.createElement(I,{currentUser:o,style:$}),r.a.createElement(Y,{style:$})))}var X=function(e){var t=e.userName;return r.a.createElement("div",{className:"container-md content-justify-center-sm",style:{flexGrow:3}},r.a.createElement(l.a,null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(k,null)),r.a.createElement("div",{className:"col-md"},r.a.createElement(Q,{userName:t}))))},Z=a(166),ee=a(154),te=a(153),ae=a(160),ne=a(74),re=a.n(ne),oe=a(152),ce=a(116),le=a(151),ie=Object(le.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function se(){var e=r.a.useState(void 0),t=Object(i.a)(e,2),a=t[0],n=t[1];function o(){return(o=Object(w.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.collection("users").doc(a),e.next=3,t.get();case 3:(n=e.sent).exists&&c(n.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=Object(w.a)(A.a.mark((function e(t){var n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userName:t.userName,isOnline:!0,isActive:!0,memberSince:t.memberSince,team:t.team,role:t.role},e.next=3,E.collection("users").doc(a).set(n);case 3:r=e.sent,console.log("Set logged in user: ",r),window.location.href="".concat("/agile-poker","/");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=ie();return r.a.createElement(oe.a,{component:"main",maxWidth:"xs"},r.a.createElement(te.a,null),r.a.createElement("div",{className:s.paper},r.a.createElement(Z.a,{className:s.avatar},r.a.createElement(re.a,null)),r.a.createElement(ce.a,{component:"h1",variant:"h5"},"Agile Poker Table"),r.a.createElement("form",{className:s.form,onSubmit:function(e){e.preventDefault(),a&&(function(){o.apply(this,arguments)}(),function(e){sessionStorage.setItem("agilePokerUserName",e)}(a))},noValidate:!0},r.a.createElement(ae.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){n(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"userName",autoComplete:"email",autoFocus:!0}),r.a.createElement(ee.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit},"Enter"))))}function ue(){var e=y();return r.a.createElement("div",null,e?r.a.createElement(X,{userName:e}):r.a.createElement(se,null))}var me=a(161),fe=a(155);function pe(){return r.a.createElement(ce.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(fe.a,{color:"inherit",href:"https://github.com/saurabhpro/"},"Saurabh")," ",(new Date).getFullYear(),".")}var Ee=a(156),de=a(157),ve=a(158),Oe=a(159),_e=a(75),ge=a.n(_e),he=a(76),Se=a.n(he);function be(){var e=y();sessionStorage.removeItem("agilePokerUserName"),function(e){Ce.apply(this,arguments)}(e)}function Ce(){return(Ce=Object(w.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=E.collection("users").doc(t),e.prev=1,e.next=4,a.set({isOnline:!1},{merge:!0});case 4:n=e.sent,console.log("Set: ",n),window.location.href="".concat("/agile-poker","/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var Te=Object(le.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap",backgroundColor:"white"},toolbarTitle:{flexGrow:1},link:{margin:e.spacing(1,1.5)},fab:{height:"3em",width:"3em"}}})),Ne=function(){var e=Te(),t=r.a.useState(y()),a=Object(i.a)(t,2),n=a[0],o=a[1],c=!!n;return r.a.createElement("div",null,r.a.createElement(Ee.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(de.a,{className:e.toolbar},r.a.createElement(ce.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle},"Agile Poker"),r.a.createElement("nav",null),c&&r.a.createElement("div",null," ",r.a.createElement(M.a,{title:"Profile",arrow:!0},r.a.createElement(ve.a,{onClick:function(){return alert("you found a hidden feature ;)")}},r.a.createElement(Oe.a,{color:"primary",className:e.fab},r.a.createElement(ge.a,null)))),r.a.createElement(M.a,{title:"Logout",arrow:!0},r.a.createElement(ve.a,{onClick:function(){return be(),void o(void 0)}},r.a.createElement(Oe.a,{color:"secondary",className:e.fab},r.a.createElement(Se.a,null))))))))},ye=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(Ne,null)),r.a.createElement(ue,null),r.a.createElement("footer",null,r.a.createElement(me.a,{mt:8},r.a.createElement(pe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){},67:function(e,t,a){e.exports=a.p+"static/media/infinity.cf7b1a96.svg"},92:function(e,t,a){e.exports=a(114)},97:function(e,t,a){},98:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.11a941cc.chunk.js.map